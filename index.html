<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Austin Pop Art å¤©æ°£è§€æ¸¬ </title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0; padding: 0; box-sizing: border-box;
        }

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background: #fafafa;
            min-height: 100vh;
        }

        /* ======= Warhol ç¶“å…¸é¡è‰² ======= */
        :root {
            --w-yellow: #FFEB3B;
            --w-blue: #2979FF;
            --w-pink: #FF4081;
            --w-green: #00E676;
            --w-black: #000;
        }

        /* ========== é ‚éƒ¨æ¬„ä½ ========== */
        .status-bar {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            background: var(--w-black);
            color: white;
            font-weight: 900;
            letter-spacing: 1px;
        }

        .location-pill {
            background: var(--w-yellow);
            color: var(--w-black);
            padding: 5px 15px;
            border: 3px solid var(--w-black);
            border-radius: 25px;
            font-weight: 900;
        }

        .update-pill {
            background: var(--w-blue);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            border: 3px solid var(--w-black);
        }

        /* ========== å››åˆ†å‰² Warhol Grid ========== */
        .warhol-grid {
            margin: 25px auto;
            max-width: 680px;
            display: grid;
            gap: 15px;
            grid-template-columns: repeat(2, 1fr);
        }

        .wh-card {
            padding: 30px 10px;
            border: 6px solid var(--w-black);
            border-radius: 12px;
            text-align: center;
            font-weight: 900;
            color: var(--w-black);
            box-shadow: 6px 6px 0 var(--w-black);
            position: relative;
            overflow: hidden;
        }

        /* Riso éŒ¯ç‰ˆé¢¨æ ¼ï¼ˆè‰²å¡Šæ–å‹•ï¼‰ */
        @keyframes hueShake {
            0% { filter: hue-rotate(0deg) brightness(100%); }
            25% { filter: hue-rotate(12deg) brightness(110%); }
            50% { filter: hue-rotate(-10deg) brightness(105%); }
            75% { filter: hue-rotate(8deg) brightness(95%); }
            100% { filter: hue-rotate(0deg) brightness(100%); }
        }

        .c1 { background: var(--w-yellow); animation: hueShake 5s infinite ease-in-out; }
        .c2 { background: var(--w-blue); color: white; animation: hueShake 6s infinite ease-in-out .3s; }
        .c3 { background: var(--w-pink); animation: hueShake 5.5s infinite ease-in-out .6s; }
        .c4 { background: var(--w-green); animation: hueShake 7s infinite ease-in-out 1s; }


        /* ===== åŠè‰²èª¿ Dot æ•ˆæœï¼ˆHalftoneï¼‰ ===== */
        .halftone {
            position: relative;
            display: inline-block;
        }

        .halftone::after {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;

            background: repeating-radial-gradient(
                circle,
                rgba(0,0,0,0.25) 0,
                rgba(0,0,0,0.25) 2px,
                transparent 3px,
                transparent 6px
            );

            mix-blend-mode: multiply;
            opacity: 0.45;
            pointer-events: none;
        }

        .wh-icon {
            font-size: 4.5rem;
            margin-bottom: 10px;
            filter: brightness(150%) contrast(240%) saturate(350%) drop-shadow(4px 4px 0 #000);
        }

        .wh-temp {
            font-size: 3rem;
        }

        .wh-desc {
            font-size: 1.5rem;
            margin-top: 5px;
        }

        /* ========== ç¨å¾Œé å ± (å°å¡) ========== */
        .section-title {
            max-width: 680px;
            margin: 10px auto;
            font-size: 1.6rem;
            font-weight: 900;
            color: var(--w-black);
        }

        .scroll-container {
            max-width: 680px;
            margin: 0 auto;
            display: flex;
            overflow-x: auto;
            gap: 15px;
            padding-bottom: 15px;
        }

        .scroll-container::-webkit-scrollbar { display: none; }

        .mini-card {
            min-width: 150px;
            padding: 18px;
            border-radius: 12px;
            border: 5px solid var(--w-black);
            box-shadow: 5px 5px 0 var(--w-black);
            text-align: center;
            font-weight: 900;
        }

        .mini-card:nth-child(4n+1) { background: var(--w-yellow); }
        .mini-card:nth-child(4n+2) { background: var(--w-blue); color: white; }
        .mini-card:nth-child(4n+3) { background: var(--w-pink); }
        .mini-card:nth-child(4n+4) { background: var(--w-green); }

        .mini-icon {
            font-size: 2.8rem;
            margin-bottom: 5px;
            filter: brightness(150%) contrast(240%) saturate(350%) drop-shadow(4px 4px 0 #000);
        }

        /* ===== Loading ===== */
        .loading-screen {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: var(--w-yellow);
            display: flex; justify-content: center; align-items: center;
            flex-direction: column;
            z-index: 999;
        }
    </style>
</head>

<body>
    <!-- ========== Loading ç•«é¢ ========== -->
    <div id="loading" class="loading-screen">
        <div style="font-size:4rem;">â˜ï¸</div>
        <p style="margin-top:15px;font-weight:900;">æ­£åœ¨è§€æ¸¬é›²çš„æµå‹•...</p>
    </div>

    <!-- ========== é ‚éƒ¨æ¬„ä½ ========== -->
    <div class="status-bar">
        <div class="location-pill">ğŸ“ å°ä¸­</div>
        <div id="updateTime" class="update-pill">æ›´æ–°ä¸­...</div>
    </div>

    <div id="mainContent" style="display:none;">

        <!-- å››æ ¼ Warhol é¢¨æ ¼ -->
        <div id="warholGrid" class="warhol-grid"></div>

        <!-- ç¨å¾Œé å ± -->
        <h3 class="section-title">ç¨å¾Œé å ±</h3>
        <div id="futureForecasts" class="scroll-container"></div>
    </div>


    <!-- ========== JS ========== -->
    <script>
        const API_URL = "https://weather-taichun.zeabur.app/api/weather/taichung";

        function getWeatherIcon(w) {
            if (w.includes("æ™´")) return "â˜€ï¸";
            if (w.includes("å¤šé›²")) return "â›…";
            if (w.includes("é™°")) return "â˜ï¸";
            if (w.includes("é›¨")) return "ğŸŒ§ï¸";
            if (w.includes("é›·")) return "â›ˆï¸";
            return "ğŸŒ¤ï¸";
        }

        function getTimePeriod(t) {
            const h = new Date(t).getHours();
            if (h < 5) return "æ·±å¤œ";
            if (h < 11) return "æ—©æ™¨";
            if (h < 14) return "ä¸­åˆ";
            if (h < 18) return "ä¸‹åˆ";
            return "æ™šä¸Š";
        }

        function renderWeather(data) {
            const current = data.forecasts[0];
            const others = data.forecasts.slice(1);

            const period = getTimePeriod(current.startTime);
            const avgTemp = Math.round((+current.maxTemp + +current.minTemp) / 2);

            /* ========== Warhol å››æ ¼ ========== */
            document.getElementById("warholGrid").innerHTML = `
                <div class="wh-card c1">
                    <div class="wh-icon halftone">${getWeatherIcon(current.weather)}</div>
                    <div class="wh-temp">${avgTemp}Â°</div>
                    <div class="wh-desc">${period}</div>
                </div>

                <div class="wh-card c2">
                    <div class="wh-icon halftone">${getWeatherIcon(current.weather)}</div>
                    <div class="wh-desc">${current.weather}</div>
                    <div class="wh-temp">${current.minTemp}Â° ~ ${current.maxTemp}Â°</div>
                </div>

                <div class="wh-card c3">
                    <div class="wh-icon halftone">ğŸ’§</div>
                    <div class="wh-temp">${current.rain}</div>
                    <div class="wh-desc">é™é›¨ç‡</div>
                </div>

                <div class="wh-card c4">
                    <div class="wh-icon halftone">ğŸŒ¡ï¸</div>
                    <div class="wh-temp">${current.maxTemp}Â°</div>
                    <div class="wh-desc">æœ€é«˜æº«</div>
                </div>
            `;

            /* ========== ç¨å¾Œé å ± ========== */
            const container = document.getElementById("futureForecasts");
            container.innerHTML = "";

            const today = new Date().getDate();

            others.forEach(f => {
                let period = getTimePeriod(f.startTime);
                if (new Date(f.startTime).getDate() !== today) period = "æ˜å¤©" + period;

                container.innerHTML += `
                    <div class="mini-card">
                        <div>${period}</div>
                        <div class="mini-icon halftone">${getWeatherIcon(f.weather)}</div>
                        <div>${f.minTemp}Â° - ${f.maxTemp}Â°</div>
                        <div>ğŸ’§ ${f.rain}</div>
                    </div>
                `;
            });

            const now = new Date();
            const days = ["é€±æ—¥","é€±ä¸€","é€±äºŒ","é€±ä¸‰","é€±å››","é€±äº”","é€±å…­"];
            document.getElementById("updateTime").textContent =
                `${now.getMonth()+1}æœˆ${now.getDate()}æ—¥ ${days[now.getDay()]}`;
        }

        async function fetchWeather() {
            try {
                const delay = new Promise(r => setTimeout(r, 1400));
                const json = await fetch(API_URL).then(r => r.json());
                await delay;

                if (json.success) {
                    renderWeather(json.data);
                    document.getElementById("loading").style.display = "none";
                    document.getElementById("mainContent").style.display = "block";
                }
            } catch (e) {
                alert("å¤©æ°£è³‡æ–™è®€å–å¤±æ•—ï¼");
            }
        }

        document.addEventListener("DOMContentLoaded", fetchWeather);
    </script>

</body>
</html>
